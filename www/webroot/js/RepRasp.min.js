/*! RepRasp https://www.huement.com/reprasp 2015-07-28 */
function start_page(){var a=$("#start_page").text();void 0!==a&&null!==a&&(console.debug("current page: "+a),"index"==a&&startindex(),"controls"==a&&startcontrols())}function startindex(){getstatus()}function startcontrols(){$(".plus_x").on("click",function(a){a.preventDefault();var b=$(".measured_amount .active").data("amount"),c=parseInt(b,10);movedirection(c,0,0)}),$(".minus_x").on("click",function(a){a.preventDefault();var b=$(".measured_amount .active").data("amount"),c=parseInt("-"+b,10);movedirection(c,0,0)}),$(".plus_y").on("click",function(a){a.preventDefault();var b=$(".measured_amount .active").data("amount"),c=parseInt(b,10);movedirection(0,c,0)}),$(".minus_y").on("click",function(a){a.preventDefault();var b=$(".measured_amount .active").data("amount"),c=parseInt("-"+b,10);movedirection(0,c,0)}),$(".plus_z").on("click",function(a){a.preventDefault();var b=$(".measured_amount .active").data("amount"),c=parseInt(b,10);movedirection(0,0,c)}),$(".minus_z").on("click",function(a){a.preventDefault();var b=$(".measured_amount .active").data("amount"),c=parseInt("-"+b,10);movedirection(0,0,c)}),$(".measured_amount .btn").on("click",function(a){a.preventDefault(),$(".measured_amount .btn").removeClass("active"),$(this).addClass("active")})}function movedirection(a,b,c){var d=GlobalURL+"/api/printer/printhead",e={command:"jog",x:a,y:b,z:c};console.debug(e),console.debug(d);var f=JSON.stringify(e);$.ajax({type:"post",url:d,dataType:"json",data:f,contentType:"application/json",headers:{"X-Api-Key":GlobalKey},success:function(a){console.debug(a)},error:function(a){console.debug(a)}})}function getstatus(){var a=GlobalURL+"/api/connection";console.debug(a),$.ajax({type:"GET",url:a,dataType:"JSON",headers:{"X-Api-Key":GlobalKey},success:function(a){console.debug(a),void 0!==a.current&&void 0!==a.current.state&&($("#mac_state").text(a.current.state),"Operational"==a.current.state&&($(".status_panel").removeClass("panel-default").addClass("panel-success"),$(".status_lead ").addClass("alert-success")))},error:function(a){console.debug(a)}})}function configfile(){var a="webroot/files/defaults.json";$.ajax({type:"GET",url:a,dataType:"JSON",success:function(a){console.debug(a.apiurl),GlobalKey=a.apikey,GlobalURL="http://"+a.apiurl,GlobalDebug=a.debug,void 0!==a.apiurl&&""!==a.apiurl?(1==a.debug,start_page()):MumfordNote("Error. Config Not Found",!1,"error","true")},error:function(a){console.debug(a)}})}var GlobalURL="octopi.local:5000",GlobalKey="",GlobalDebug=0;$(document).ready(function(){configfile()});